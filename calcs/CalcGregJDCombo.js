/* Copyright (C) 2022 Alma Nuradnan Pramudita (email: gocodealpha@gmail.com)

This file is part of SimAstroPosisi.

SimAstroPosisi is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

SimAstroPosisi is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with SimAstroPosisi. If not, see <https://www.gnu.org/licenses/>. */

let GregJDCombo=function(e){var t=320,a=10,o=14;let r,i,l,n,s,u,f,x,g,b,c,h,p,k,d,m,M,S,v,z,F,T,R,A,E,J,C,D,w,G,N,L,j,y,I,O,P;function H(a,o){if(0<=a){let e=Math.floor(a),t=a-e;for(e=e.toString();e.length<o;)e="0"+e;return 0!=t&&(t=Math.round(t*Math.pow(10,o))/Math.pow(10,o),t=t.toString(),e+=t.substr(1,t.length-1)),e}{a=Math.abs(a);let e=Math.floor(a),t=a-e;for(e=e.toString();e.length<o;)e="0"+e;return 0!=t&&(t=Math.round(t*Math.pow(10,o))/Math.pow(10,o),t=t.toString(),e+=t.substr(1,t.length-1)),e="-"+e,e}}e.preload=function(){r=e.loadFont("https://anuradnanp.github.io/simastroposisi/aset/Lato-Regular.ttf"),i=e.loadFont("https://anuradnanp.github.io/simastroposisi/aset/Lato-Bold.ttf")},e.setup=function(){e.createCanvas(t,425),e.frameRate(5),l=e.createInput("2021"),l.position(70,45).addClass("leaveAlone"),l.size(100,21),l.style("font-family","Lato-Regular"),l.style("font-size","14px"),n=e.createSlider(1,12,3,1),n.position(150,79),n.size(150,o),s=e.createSlider(1,31,17,1),s.position(150,103),s.size(150,o),u=e.createSlider(0,23,7,1),u.position(150,127),u.size(150,o),f=e.createSlider(0,59,23,1),f.position(150,151),f.size(150,o),x=e.createSlider(0,59,41,1),x.position(150,175),x.size(150,o),S=e.createInput("2459396.50694").addClass("leaveAlone"),S.position(110,305),S.size(150,21),S.style("font-family","Lato-Regular"),S.style("font-size","14px")},e.mousePressed=function(){0<e.mouseX&&e.mouseX<e.width&&0<e.mouseY&&e.mouseY<e.height&&e.frameRate(20)},e.mouseReleased=function(){e.frameRate(5)},e.draw=function(){switch(e.background("#D79922"),e.noStroke(),n.value()){case 1:g="Januari";break;case 2:g="Februari";break;case 3:g="Maret";break;case 4:g="April";break;case 5:g="Mei";break;case 6:g="Juni";break;case 7:g="Juli";break;case 8:g="Agustus";break;case 9:g="September";break;case 10:g="Oktober";break;case 11:g="November";break;case 12:g="Desember"}e.push(),e.fill("#ffffff"),e.textFont(i),e.textSize(10),e.textAlign(e.RIGHT),e.rotate(0),e.text("tahun / bulan / tanggal\njam : menit : detik",145,10),e.textSize(14),e.textAlign(e.CENTER,e.CENTER),e.text("ke",160,20),e.textSize(18),e.textAlign(e.LEFT,e.CENTER),e.text("JD",175,20),e.pop(),e.fill("#000000"),e.textFont(r),e.textSize(14),e.textAlign(e.RIGHT,e.TOP),e.text("tahun",a,50,50,o),e.text("bulan",a,84,50,o),e.text("tanggal",a,108,50,o),e.text("jam",a,132,50,o),e.text("menit",a,156,50,o),e.text("detik",a,180,50,o),e.textAlign(e.LEFT,e.TOP),e.text(": "+g,60,84,85,o),e.text(": "+s.value(),60,108,85,o),e.text(": "+u.value(),60,132,85,o),e.text(": "+f.value(),60,156,85,o),e.text(": "+x.value(),60,180,85,o),e.greg2jd(),e.textFont(i),e.textAlign(e.RIGHT,e.TOP),e.textSize(10),e.text(s.value()+" "+g+" "+l.value()+" pukul "+H(u.value(),2)+":"+H(f.value(),2)+":"+H(x.value(),2),a,209,300,10),e.textSize(20),e.text("JD "+b.round(5),a,229,300,20),e.push(),e.fill("#ffffff"),e.textFont(i),e.textSize(10),e.textAlign(e.LEFT),e.rotate(0),e.text("tahun / bulan / tanggal\njam : menit : detik",175,270),e.textSize(14),e.textAlign(e.CENTER,e.CENTER),e.text("ke",160,280),e.textSize(18),e.textAlign(e.RIGHT,e.CENTER),e.text("JD",145,280),e.pop(),e.fill("#000000"),e.textFont(r),e.textSize(14),e.textAlign(e.LEFT,e.TOP),e.noStroke(),e.text("tanggal Julian",a,310,100,o),e.jd2greg(),e.textFont(i),e.textAlign(e.RIGHT,e.TOP),e.textSize(10),e.text("JD "+S.value(),a,339,300,10),e.textSize(20),e.text(z[2]+" "+z[1]+" "+z[0]+"\npukul "+H(z[3],2)+":"+H(z[4],2)+":"+H(z[5].round(1),2),a,359,300,50)},e.jd2greg=function(){switch(v=parseFloat(S.value())+.5,F=Math.floor(v),T=v-F,R=F<2299161?F:(A=Math.floor((F-1867216.25)/36524.25),F+1+A-Math.floor(A/4)),E=R+1524,J=Math.floor((E-122.1)/365.25),C=Math.floor(365.25*J),D=Math.floor((E-C)/30.6001),w=E-C-Math.floor(30.6001*D),G=24*T,N=Math.floor(G),L=60*(G-N),j=Math.floor(L),P=60*(L-j),D<14?y=D-1:14!=D&&15!=D||(y=D-13),2<y?I=J-4716:1!=y&&2!=y||(I=J-4715),y){case 1:O="Januari";break;case 2:O="Februari";break;case 3:O="Maret";break;case 4:O="April";break;case 5:O="Mei";break;case 6:O="Juni";break;case 7:O="Juli";break;case 8:O="Agustus";break;case 9:O="September";break;case 10:O="Oktober";break;case 11:O="November";break;case 12:O="Desember"}return z=[I,O,w,N,j,P],z},Number.prototype.round=function(e){return this<Math.pow(10,-e)?+(Math.round("0e+"+e)+"e-"+e):+(Math.round(this+"e+"+e)+"e-"+e)},e.greg2jd=function(){return c=parseFloat(s.value())+parseFloat(u.value())/24+parseFloat(f.value())/1440+parseFloat(x.value())/86400,m=n.value(),h=m,M=parseFloat(l.value()),p=M,h<=2&&(p=M-1,h=m+12),k=Math.floor(p/100),d=2-k+Math.floor(k/4),(M<1582||1582==M&&m<10||1582==M&&10==m&&c<15)&&(d=0),b=Math.floor(365.25*(p+4716))+Math.floor(30.6001*(h+1))+c+d-1524.5,b}},sketGregJDCombo=new p5(GregJDCombo,"CalcGregJDCombo");
